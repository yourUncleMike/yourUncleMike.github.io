<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Linux Mint 18.3</title>
<link href="../css/button.css" type="text/css" rel="stylesheet">
<link href="css/mint.css" type="text/css" rel="stylesheet">
<script src="js/button.js" type="text/javascript"></script>
<script src="js/datefu.js" type="text/javascript"></script>
<script type="text/javascript">
  function init() {
    buttons_init();
    datefu_init();
  };
</script>
</head>

<body onload="init()">
<h1>Installing <font color="#507f19">Linux Mint 18.3</font> to a thumb drive and<br>
    configuring it to dual boot with <font color="blue">Windows 10</font>.</h1>
<hr>

<table>
 <tr><td><button onclick="button_toggle(this)">+</button></td>
  <td><header>Obtain USB media</header>
   <section>
    <hr>
    <ul>
     <li><b>Install media drive</b> (USB2, at least 4GB)<br>
         You will burn an ISO image of the Mint installer to this thumb drive 
         and use it to install Mint to the other thumb drive.
         After installation, keep this drive.  You can use it as recovery media,
         if the need arises.<br>
         Recommended product:
         <a target="_blank" href="https://www.sandisk.com/home/usb-flash/cruzer-fit"><span style="background-color: black; color: red;">&nbsp;<b>SanDisk</b>&nbsp;<span style="color:white">Cruzer Fit</span>&nbsp;</span></a>
         <img width="125" height="125" style="vertical-align: top" src="images/Cruzer-Fit_with-cap_angle.png"></li>
     <li><b>Linux Mint OS drive</b> (USB3, at least 32GB)<br>
         You will install Linux Mint to this drive, which will become a permanent part of your computer.<br>
         Recommended product:
         <a target="_blank" href="https://www.sandisk.com/home/usb-flash/ultra-fit-usb"><span style="background-color: black; color: red;">&nbsp;<b>SanDisk</b>&nbsp;<span style="color:white">Ultra Fit</span>&nbsp;</span></a>
        <img width="125" height="125" style="vertical-align: top" src="images/CZ43_128GB_agnle_right_open-retina.png"></li>
    </ul>
    <hr>
   </section>
  </td>
 </tr>
</table>

<table>
 <tr><td><button onclick="button_toggle(this)">+</button></td>
  <td><header>Prepare install media</header>
   <section>
    <hr>
    <ul>
     <li><a target="_blank" href="https://linuxmint.com/edition.php?id=246">Download</a> ISO from linuxmint.com.</li>
     <li><a target="_blank" href="https://linuxmint.com/verify.php">Verify</a> ISO checksum.</li>
     <li><a target="_blank" href="http://linuxmint-installation-guide.readthedocs.io/en/latest/burn.html">"Burn"</a> ISO to install media.</li>
    </ul>
    <hr>
   </section>
  </td>
 </tr>
</table>

<table>
 <tr><td><button onclick="button_toggle(this)">+</button></td>
  <td><header>Prepare Windows</header>
   <section>
    <hr>
    <table>

     <tr>
      <td><button onclick="button_toggle(this)">+</button></td>
      <td><header>Force Windows to use UTC for hardware clock (to keep time consistent between Windows and Linux)</header>
       <section>
        <ul>
         <li>Run <b>regedit</b></li>
         <li>Navigate to <input type="text" value="Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation" size="92" readonly></li>
         <li>Create new DWORD value named <input type="text" value="RealTimeIsUniversal" size="19" readonly> then set its value to <input input type="text" value="1" size="1" readonly></li>
        </ul>
       </section>
      </td>
     </tr>

     <tr>
      <td><button onclick="button_toggle(this)">+</button></td>
      <td><header>Disable <a target="_blank" href="https://docs.microsoft.com/en-us/windows/device-security/bitlocker/bitlocker-overview">BitLocker</a> (to allow Linux to access Windows hard drive)</header>
       <section>
        <p>(This step is optional and introduces some security risk.)</p>
       </section>
      </td>
     </tr>

     <tr>
      <td><button onclick="button_toggle(this)">+</button></td>
      <td><header>Disable fast boot (to keep Windows hard drive accessible to Linux)</header>
       <section>
        <ul>
         <li>Open <span style="font-weight: bold"><a href="ms-settings:powersleep">Power & sleep</a></span> settings</li>
         <li>Under <span style="font-weight: bold">Related settings</span> click <span style="color:blue;">Additional power settings</span></li>
         <li>Under the <span style="font-weight: bold">Control Panel Home</span> column, click <span style="color:blue">Choose what the power button does</span></li>
         <li>Click <span style="color:blue">Change Settings that are currently unavailable</span></li>
         <li>Under <span style="font-weight: bold">Shutdown settings</span> uncheck <button disabled style="border-radius: 0.2em">&nbsp;</button> <span style="font-weight: bold">Turn on fast startup</span></li>
         <li>Click <button disabled style="border-radius: 0.2em"> Save changes </button></li>
        </ul>
        <p>(Fast boot does not really make Windows boot that much faster.)</p>
       </section>
      </td>
     </tr>

    </table>
    <hr>
   </section>
  </td>
 </tr>
</table>

<table>
 <tr>
  <td><button onclick="button_toggle(this)">+</button></td>
  <td><header>Prepare BIOS</header>
   <section>
    <hr>
    <p>Edit BIOS settings, as follows:</p>
    <ul>
     <li>Disable secure boot, and see if Windows still starts.  (If not, re-enable secure boot and hope for the best.)</li>
     <li>Change boot order to try USB media before trying the hard drive.</li>
    </ul>
    <p>If you have trouble getting to your BIOS settings, try <button disabled style="border-radius: 0.2em"> Shift </button>+<button disabled style="border-radius: 0.2em; background-color: black; color: white;"> Restart </button> from Windows.</p>
    <hr>
   </section>
  </td>
 </tr>
</table>

<table>
 <tr><td><button onclick="button_toggle(this)">+</button></td>
  <td><header>Install Linux Mint</header>
   <section>
    <hr>
    <ul>
     <li>Reboot from install media to the Mint desktop.</li>
     <li>Turn off the screen saver.</li>
     <li>Connect to the Internet.</li>
     <li>Insert OS media into the USB slot furthest away from fan exhaust ports.</li>
     <li>Double-click the <span>Install Linux Mint</span> icon.</li>
     <li>Check the box for <button disabled style="border-radius: 0.2em">x</button> <span>Install third-party software for graphics and Wi-Fi hardware.</span></li>
     <li>For <span>Installation type</span>, choose <span>Something else</span>.</li>
     <li>Leave sda and sdb drives untouched.</li>
     <li>Select <b>/dev/sdc</b> and click
         <button disabled style="border-radius: 0.2em"> New Partition Table... </button></li>
     <li>Under <b>/dev/sdc</b> select <b>free space</b> and click 
         <button disabled style="border-radius: 0.2em"> + </button></li>
     <li>For <span>Mount point</span> choose
         <button disabled style="border-radius: 0.2em"> / </button>,
         then click <button disabled style="border-radius: 0.2em"> OK </button>
         to format the entire disk as an Ext4 partition.</li>
     <li>For <span>Device for boot loader installation:</span> choose <b>/dev/sdc</b> (<u>not</u> sdc1), then click
         <button disabled style="border-radius: 0.2em"> Install Now </button></li>
     <li>Do <u>not</u> configure a swap partition.</li>
     <li>Choose timezone, keyboard layout, etc. and proceeed to installation.</li>
     <li>When installation completes, click <button disabled style="border-radius: 0.2em">Continue Testing</button>.</li>
     <li>Shutdown then remove install media when prompted.</li>
    </ul>
    <hr>
   </section>
  </td>
 </tr>
</table>

<table>
 <tr><td><button onclick="button_toggle(this)">+</button></td>
  <td><header>Post-installation optimization</header>
   <section>
    <hr>
    <table>

     <tr><td><table><tr><td><button onclick="button_toggle(this)">-</button></td>
         <td><header>Boot from Mint OS media with hardware rendering disabled (to prevent crashes caused by graphics driver changes during the next step).</header>
          <section>
           <hr>
           <ul>
            <li>When the GRUB boot menu appears, press 
                <button disabled style="border-radius: 0.2em">e</button>
                to edit the boot commands.</li>
            <li>Down arrow to the line starting with <b>linux</b></li>
            <li>Right arrow to just before the words <b>quiet splash</b></li>
            <li>Insert the following text:&nbsp;&nbsp;<span style="font-family: monospace; font-weight: bold; color: red;">nomodeset #</span></li>
            <li>Press <button disabled style="border-radius: 0.2em"> F10 </button> to continue.</li>
           </ul>
           <hr>
          </section>
         </td></tr></table></td>
     </tr>

     <tr><td><table><tr><td><button onclick="button_toggle(this)">+</button></td>
         <td><header>Redirect <b>/var/log</b> to RAM disk (to avoid write wear on thumb drive).</header>
          <section>
           <hr>
           <table>
            <tr><td>$</td><th>cd /var</th></tr>
            <tr><td>$</td><th>sudo mv log log.OLD && sudo ln -s /dev/shm log</th></tr>
           </table>
           <hr>
          </section>
         </td></tr></table></td>
     </tr>

     <tr><td><table><tr><td><button onclick="button_toggle(this)">+</button></td>
         <td><header>Reconfigure GRUB to show boot menu and default to the last OS booted (to make Windows updates easier).</header>
          <section>
           <hr>
           <table>
            <tr><td>$</td><th>cd /boot/grub</th></tr> 
            <tr><td>$</td><th>sudo cp -p grub.cfg grub.cfg.OLD && sudo nano grub.cfg</th></tr> 
            <tr><td>&nbsp;</td><td><pre>
:
if [ "${next_entry}" ] ; then
   set default="${next_entry}"
   set next_entry=
   save_env next_entry
   set boot_once=true
else
   set default="0"
   <font color="red"><b>if [ "${saved_entry}" ] ; then set default="${saved_entry}" ; fi</b></font>
fi
:
if [ "${recordfail}" = 1 ] ; then
  set timeout=30
else
  if [ x$feature_timeout_style = xy ] ; then
    set timeout_style=<font color="red"><b>menu   #</b></font> hidden
    set timeout=<font color="red"><b>10           #</b></font> 0
:
menuentry 'Linux Mint 18.3 Cinnamon 64-bit' ...
        recordfail
        :
        linux   /boot/vmlinuz-4.4.0-53-generic root=UUID=...
        initrd  /boot/initrd.img-4.4.0-53-generic
        <font color="red"><b>savedefault</b></font>
}
:
### BEGIN /etc/grub.d/30_os-prober ###
menuentry 'Windows Boot Manager (on /dev/sda1)' --class windows --class os ...
        insmod part_gpt
        :
        chainloader /EFI/Microsoft/Boot/bootmgfw.efi
        <font color="red"><b>savedefault</b></font>
}    
</pre></td></tr>
           </table>
           <hr>
          </section>
         </td></tr></table></td>
     </tr>

     <tr><td><table><tr><td><button disabled>&bull;</button></td>
         <td><header>
           Run <b>driver-manager</b> to see if better graphics or wireless drivers are available.
           If so, upgrade the drivers.  Especially the graphics driver.
           (You can, however, ignore microcode updates for now.)
          </header>
         </td></tr></table></td>
     </tr>

     <tr><td><table><tr><td><button disabled>&bull;</button></td>
         <td><header>Reboot and make sure everything works (graphics, sound, wireless, bluetooth)</header>
         </td></tr></table></td>
     </tr>

     <tr><td><table><tr><td><button onclick="button_toggle(this)">+</button></td>
         <td><header>Synchronize bluetooth pairing keys.</header>
          <section>
           <ul>
            <li>Pair devices on Linux.</li>
            <li>Reboot to Windows, then un-pair and re-pair devices.</li>
            <li><header>Reboot to Linux, then replace Linux pairing keys with Windows pairing keys.</header>
             <section>
              <table>
               <tr><td colspan="2"><hr></td></tr>
               <tr><td>$</td><th>wget https://yourunclemike.github.io/linux/blueaud</th></tr>
               <tr><td>$</td><th>sudo ./blueaud  <font color="grey"># Use a separate terminal for this</grey></th></tr>
               <tr><td>$</td><th>sudo nano $(sudo find /var/lib/bluetooth -name info)</th></tr>
               <tr><td> </td><td><pre>[General]
Name=...
:

[LinkKey]
Key=<font color="lightgrey">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</pre></font></td></tr>
               <tr><td> </td><td>:</td></tr>
               <tr><td colspan="2"><hr></td></tr>
              </table>
             </section>
            </li>
            <li>Restart bluetooth service.</li>
           </ul>
          </section>
         </td></tr></table></td>
     </tr>

     <tr><td><table><tr><td><button onclick="button_toggle(this)">+</button></td>
         <td><header>Mount Windows drive at /C:  (only if fast boot and BitLocker are disabled).</header>
          <section>
           <hr>
           <table>
            <tr><td>$</td><th>pushd /etc</th></tr>
            <tr><td>$</td><th>read fstype uuid size &gt; &gt;(lsblk -lb -x SIZE -o FSTYPE,UUID,SIZE /dev/sda | grep ntfs | tail -1)</th></tr>
            <tr><td>$</td><th>sudo cp -p fstab fstab.OLD</th></tr>
            <tr><td>$</td><th>sudo tee -a fstab &gt; &gt;(echo UUID=$uuid$'\t/C:\tntfs\tdefaults\t0\t2')</th></tr>
            <tr><td> </td><td><pre>UUID=<font color="lightgrey">xxxxxxxxxxxxxxxx</font>   /C:     ntfs    defaults        0       2</pre></td></tr>
            <tr><td>$</td><th>sudo mount /C:</th></tr>
            <tr><td>$</td><th>popd</th></tr>
           </table>
           <hr>
          </section>
         </td></tr></table></td>
     </tr>

     <tr hidden><td><table><tr><td><button onclick="button_toggle(this)">+</button></td>
         <td><header>Reserved for heading.</header>
          <section>
           <hr>
           Reserved for detailed content.
           <hr>
          </section>
         </td></tr></table></td>
     </tr>

    </table>
    <hr>
   </section>
  </td>
 </tr>
</table>

<table>
 <tr>
  <td><button onclick="button_toggle(this)">+</button></td>
  <td>
   <header>References</header>
   <section>
    <hr>
    <ul>
     <li><a target="_blank" href="https://linuxmint.com/rel_sylvia_cinnamon.php">Release Notes</a> for Linux Mint 18.3 Cinnamon</li>
     <li>Linux Mint <a target="_blank" href="http://linuxmint-installation-guide.readthedocs.io/en/latest/">Installation Guide</a></li>
     <li><a target="blank" href="https://www.windowscentral.com/how-disable-windows-10-fast-startup">How to disable Windows 10 fast startup (and why you'd want to)</a></li>
     <li><a target="blank" href="https://winaero.com/blog/how-to-open-various-settings-pages-directly-in-windows-10/">How to open various settings pages directly in Windows 10</a></li>
    </ul>
    <hr>
   </section>
  </td>
 </tr>
</table>

</body>
</html>
